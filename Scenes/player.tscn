[gd_scene load_steps=11 format=3 uid="uid://dwtpsn2b0dgly"]

[ext_resource type="Script" path="res://Scripts/Player.gd" id="1_m1u6h"]
[ext_resource type="PackedScene" uid="uid://6c8wci1qvgut" path="res://assets/models/weapons/ps1_style_machete.glb" id="2_xnj7x"]
[ext_resource type="PackedScene" uid="uid://d0ta3ndrmln10" path="res://assets/models/weapons/38_special_revolver.glb" id="3_tvpx1"]

[sub_resource type="CapsuleMesh" id="CapsuleMesh_4xdo1"]
radius = 0.3

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_35nbx"]
points = PackedVector3Array(0.267016, 0.766948, -0.1164, -0.291458, -0.761872, -0.0276713, -0.291252, -0.761336, 0.0307681, 0.268404, -0.800496, -0.0873515, 0.0595203, 0.725185, 0.291707, -0.142914, 0.751361, -0.258503, 0.176354, -0.757722, 0.234724, 0.0307677, -0.761328, -0.291249, -0.260518, 0.78619, 0.118015, -0.142848, -0.722061, 0.261502, 0.266301, 0.764882, 0.119199, -0.119879, -0.971825, 0.0318498, 0.145392, 0.748031, -0.257351, 0.0923368, 0.96888, 0.0923368, -0.196733, -0.708295, -0.22508, -0.286001, 0.718859, -0.0846668, -0.142848, 0.722061, 0.261502, 0.291707, -0.725185, 0.0595203, -0.0287456, 0.972175, -0.119923, 0.198947, -0.676966, -0.224046, -0.0565014, -0.726422, 0.292202, 0.0923368, -0.96888, 0.0923368, -0.0585673, -0.932875, -0.178936, -0.248347, -0.638684, 0.16812, 0.0307681, 0.761336, -0.291252, 0.225451, 0.671658, 0.1974, -0.148495, 0.930441, 0.121583, -0.0846668, -0.718859, -0.286001, 0.292202, 0.726422, -0.0565014, -0.207688, 0.896906, -0.0880939, 0.121583, -0.930441, -0.148495, -0.0878682, -0.894648, 0.210278)

[sub_resource type="Animation" id="Animation_j2n1a"]
resource_name = "machete_activate"
length = 0.5
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("machete:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.483333),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector3(0.352959, -1.15995, 0.252081), Vector3(-0.331155, -0.177799, -0.75605)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("machete:visible")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.2),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [false, true]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("machete:rotation")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0.0666667, 0.483333),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector3(-0.855211, -3.33183, 0), Vector3(0.572468, 0, 0)]
}

[sub_resource type="Animation" id="Animation_l33y3"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("machete:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, -1.72703, -0.212309)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("machete:visible")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("machete:rotation")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0.476475, 0, 0)]
}

[sub_resource type="Animation" id="Animation_0feht"]
resource_name = "machete_deactivate"
length = 0.5
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("machete:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.5),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector3(-0.331155, -0.177799, -0.75605), Vector3(0.352959, -1.15995, 0.252081)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("machete:visible")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.49),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [true, false]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("machete:rotation")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 0.5),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector3(0.572468, 0, 0), Vector3(-0.855211, -3.33183, 0)]
}

[sub_resource type="Animation" id="Animation_fgk71"]
resource_name = "machete_slash"
length = 0.8
step = 5.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("machete:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.273333, 0.463333, 0.79),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 0,
"values": [Vector3(-0.331155, -0.177799, -0.75605), Vector3(-0.331155, -0.0601825, -0.280221), Vector3(-0.331155, -0.354561, -0.780934), Vector3(-0.331155, -0.177799, -0.75605)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("machete:rotation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.283333, 0.486667, 0.78),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 0,
"values": [Vector3(0.572468, 0, 0), Vector3(2.23751, 0, 0), Vector3(-0.427606, 0, 0), Vector3(0.572468, 0, 0)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_rmqt3"]
_data = {
"RESET": SubResource("Animation_l33y3"),
"machete_activate": SubResource("Animation_j2n1a"),
"machete_deactivate": SubResource("Animation_0feht"),
"machete_slash": SubResource("Animation_fgk71")
}

[node name="Player" type="CharacterBody3D"]
script = ExtResource("1_m1u6h")

[node name="MeshInstance3D" type="MeshInstance3D" parent="."]
visible = false
mesh = SubResource("CapsuleMesh_4xdo1")

[node name="CollisionShape3D2" type="CollisionShape3D" parent="."]
shape = SubResource("ConvexPolygonShape3D_35nbx")

[node name="head" type="Node3D" parent="."]

[node name="Camera3D" type="Camera3D" parent="head"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.695634, 0)

[node name="Weapons_manager" type="Node3D" parent="head/Camera3D"]

[node name="fps_rig" type="Node3D" parent="head/Camera3D/Weapons_manager"]

[node name="machete" parent="head/Camera3D/Weapons_manager/fps_rig" instance=ExtResource("2_xnj7x")]
transform = Transform3D(0.08, 0, 0, 0, 0.0710894, -0.036692, 0, 0.036692, 0.0710894, 0, -1.72703, -0.212309)

[node name="revolver" parent="head/Camera3D/Weapons_manager/fps_rig" instance=ExtResource("3_tvpx1")]
transform = Transform3D(0.002, 0, 0, 0, 0.002, 0, 0, 0, 0.002, 0, -1.50228, -0.1475)

[node name="AnimationPlayer" type="AnimationPlayer" parent="head/Camera3D/Weapons_manager/fps_rig"]
libraries = {
"": SubResource("AnimationLibrary_rmqt3")
}

[node name="hand" type="Node3D" parent="."]

[node name="SpotLight3D" type="SpotLight3D" parent="hand"]
light_color = Color(1, 0.976985, 0.9215, 1)
light_volumetric_fog_energy = 1.238
spot_range = 639.737
spot_angle = 31.4079
